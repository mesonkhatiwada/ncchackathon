<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HamroCare - Donations</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f9fafb;
            overflow-x: hidden;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 5%;
            background: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,.05);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo {
            height: 50px;
        }

        .logo img {
            height: 74px;
            width: auto;
            border-radius: 15px;
            cursor: pointer;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 3rem;
        }

        .nav-links {
            display: flex;
            gap: 2.5rem;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            font-size: 1rem;
            transition: color .3s;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: #4ade80;
        }

        .user-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f0fdf4;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all .3s;
            color: #4ade80;
            font-size: 1.5rem;
        }

        .user-icon:hover {
            background: #4ade80;
            color: #fff;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            object-fit: cover;
            display: none;
        }

        .sign-out-btn {
            background: none;
            border: none;
            color: #333;
            font-weight: 500;
            cursor: pointer;
            display: none;
        }

        .sign-out-btn:hover {
            color: #4ade80;
        }

        .hamburger {
            display: none;
            flex-direction: column;
            gap: 5px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: #333;
            border-radius: 3px;
            transition: all .3s;
        }

        .donation-hero {
            padding: 4rem 5% 2rem;
            text-align: center;
            background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%);
        }

        .donation-hero h1 {
            font-size: 3.5rem;
            color: #333;
            margin-bottom: 1rem;
            font-family: 'Times New Roman', Times, serif;
        }

        .donation-hero h1::after {
            content: '.';
            color: #4ade80;
        }

        .donation-hero p {
            color: #666;
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.8;
        }

        .tabs-container {
            display: flex;
            justify-content: center;
            gap: 1rem;
            padding: 2rem 5% 0;
            max-width: 1400px;
            margin: 0 auto;
        }

        .tab-btn {
            padding: 1rem 3rem;
            background: #fff;
            border: 2px solid #e5e5e5;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            color: #333;
            transition: all .3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-btn:hover {
            border-color: #4ade80;
            color: #4ade80;
        }

        .tab-btn.active {
            background: #4ade80;
            color: #fff;
            border-color: #4ade80;
        }

        .content-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 5% 6rem;
        }

        .donate-section {
            display: none;
        }

        .donate-section.active {
            display: block;
        }

        .create-post-btn {
            background: #4ade80;
            color: #fff;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            transition: all .3s;
        }

        .create-post-btn:hover {
            background: #22c55e;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74,222,128,.3);
        }

        .create-post-btn i {
            font-size: 1.2rem;
        }

        .donation-posts {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .donation-post {
            background: #fff;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,.08);
            display: grid;
            grid-template-columns: 400px 1fr;
            transition: box-shadow .3s;
        }

        .donation-post:hover {
            box-shadow: 0 8px 30px rgba(0,0,0,.12);
        }

        .post-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .post-content {
            padding: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .shelter-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4ade80, #22c55e);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 1.5rem;
        }

        .shelter-info h3 {
            color: #333;
            font-size: 1.2rem;
            margin-bottom: 0.2rem;
        }

        .post-time {
            color: #888;
            font-size: 0.85rem;
        }

        .post-text {
            color: #555;
            line-height: 1.8;
            font-size: 1rem;
            margin-bottom: 1.5rem;
        }

        .donation-needs {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .need-tag {
            background: #f0fdf4;
            color: #4ade80;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            border: 2px solid #4ade80;
        }

        .donate-btn-post {
            background: #4ade80;
            color: #fff;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all .3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            align-self: flex-start;
        }

        .donate-btn-post:hover {
            background: #22c55e;
            transform: scale(1.02);
        }

        .top-donors-section {
            display: none;
        }

        .top-donors-section.active {
            display: block;
        }

        .donors-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .donors-header h2 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 1rem;
        }

        .donors-header p {
            color: #666;
            font-size: 1.1rem;
        }

        .donors-list {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .donor-card {
            background: #fff;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,.08);
            transition: all .3s;
            border-left: 5px solid #4ade80;
        }

        .donor-card:hover {
            transform: translateX(10px);
            box-shadow: 0 8px 30px rgba(0,0,0,.12);
        }

        .donor-card.rank-1 {
            border-left-color: #fbbf24;
            background: linear-gradient(135deg, #fffbeb 0%, #ffffff 100%);
        }

        .donor-card.rank-2 {
            border-left-color: #d1d5db;
        }

        .donor-card.rank-3 {
            border-left-color: #f97316;
        }

        .donor-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .donor-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .donor-rank {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4ade80, #22c55e);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .donor-card.rank-1 .donor-rank {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
        }

        .donor-card.rank-2 .donor-rank {
            background: linear-gradient(135deg, #d1d5db, #9ca3af);
        }

        .donor-card.rank-3 .donor-rank {
            background: linear-gradient(135deg, #f97316, #ea580c);
        }

        .donor-name {
            font-size: 1.5rem;
            color: #333;
            font-weight: 600;
        }

        .donor-points {
            background: #f0fdf4;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            color: #4ade80;
            font-size: 1.1rem;
        }

        .donor-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .stat-item {
            background: #f9fafb;
            padding: 1.2rem;
            border-radius: 12px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #888;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 1.3rem;
            color: #333;
            font-weight: 700;
            margin-bottom: 0.8rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e5e5;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ade80, #22c55e);
            border-radius: 10px;
            transition: width .5s ease;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: #fff;
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #f0f0f0;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            color: #666;
            transition: all .3s;
        }

        .modal-close:hover {
            background: #e0e0e0;
            transform: rotate(90deg);
        }

        .modal-title {
            font-size: 2rem;
            color: #333;
            margin-bottom: 1rem;
            text-align: center;
        }

        .modal-subtitle {
            color: #666;
            text-align: center;
            margin-bottom: 2rem;
        }

        .auth-toggle {
            display: flex;
            margin-bottom: 2rem;
            border: 2px solid #e5e5e5;
            border-radius: 10px;
            overflow: hidden;
        }

        .auth-toggle-btn {
            flex: 1;
            padding: 1rem;
            background: #fff;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all .3s;
        }

        .auth-toggle-btn.active {
            background: #4ade80;
            color: #fff;
        }

        .login-form {
            display: none;
        }

        .login-form.active {
            display: block;
        }

        .signup-form {
            display: none;
        }

        .signup-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: .5rem;
            color: #333;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: .8rem;
            border: 2px solid #e5e5e5;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color .3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4ade80;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .file-upload-area {
            border: 2px dashed #e5e5e5;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all .3s;
        }

        .file-upload-area:hover {
            border-color: #4ade80;
            background: #f0fdf4;
        }

        .file-upload-area i {
            font-size: 3rem;
            color: #4ade80;
            margin-bottom: 1rem;
        }

        .file-upload-area input {
            display: none;
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: #4ade80;
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all .3s;
        }

        .submit-btn:hover:not(:disabled) {
            background: #22c55e;
        }

        .donation-type-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .donation-type-card {
            background: #f9fafb;
            border: 2px solid #e5e5e5;
            border-radius: 15px;
            padding: 2rem 1rem;
            text-align: center;
            cursor: pointer;
            transition: all .3s;
        }

        .donation-type-card:hover {
            border-color: #4ade80;
            background: #f0fdf4;
            transform: translateY(-5px);
        }

        .donation-type-card.selected {
            border-color: #4ade80;
            background: #f0fdf4;
        }

        .donation-type-card i {
            font-size: 3rem;
            color: #4ade80;
            margin-bottom: 1rem;
        }

        .donation-type-card h3 {
            font-size: 1.2rem;
            color: #333;
        }

        .payment-form {
            display: none;
        }

        .payment-form.active {
            display: block;
        }

        .pickup-form {
            display: none;
        }

        .pickup-form.active {
            display: block;
        }

        .location-display {
            background: #f0fdf4;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #4ade80;
            font-weight: 600;
        }

        .file-preview {
            margin-top: 1rem;
            text-align: center;
        }

        .file-preview img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 10px;
            margin-top: 0.5rem;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255,255,255,.2);
            border-top-color: #4ade80;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .success-modal {
            background: #fff;
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            max-width: 500px;
            width: 90%;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background: #f0fdf4;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }

        .success-icon i {
            font-size: 3rem;
            color: #4ade80;
        }

        .success-modal h2 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 1rem;
        }

        .success-amount {
            font-size: 2.5rem;
            color: #4ade80;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .success-message {
            color: #666;
            line-height: 1.8;
            margin-bottom: 2rem;
        }

        .back-btn {
            background: none;
            border: none;
            color: #4ade80;
            font-weight: 600;
            cursor: pointer;
            padding: 0.5rem 1rem;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 1rem auto 0;
        }

        .back-btn:hover {
            text-decoration: underline;
        }

        .estimated-time {
            background: #f0fdf4;
            padding: 1rem;
            border-radius: 10px;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            color: #4ade80;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .or-divider {
            display: flex;
            align-items: center;
            margin: 1.5rem 0;
        }

        .or-divider::before,
        .or-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #e5e5e5;
        }

        .or-divider span {
            padding: 0 1rem;
            color: #666;
        }

        .notification-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,.2);
            display: flex;
            align-items: center;
            gap: 1rem;
            z-index: 3000;
            transform: translateX(400px);
            transition: transform .3s ease;
            border-left: 4px solid #4ade80;
            max-width: 400px;
        }

        .notification-toast.show {
            transform: translateX(0);
        }

        .notification-toast i {
            font-size: 1.5rem;
            color: #4ade80;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            color: #333;
            margin-bottom: .2rem;
        }

        .notification-message {
            font-size: .9rem;
            color: #666;
        }

        @media(max-width: 1024px) {
            .donation-post {
                grid-template-columns: 1fr;
            }

            .post-image {
                height: 300px;
            }
        }

        @media(max-width: 768px) {
            .nav-right {
                gap: 1rem;
            }

            .hamburger {
                display: flex;
            }

            .hamburger.active span:nth-child(1) {
                transform: rotate(45deg) translate(8px,8px);
            }

            .hamburger.active span:nth-child(2) {
                opacity: 0;
            }

            .hamburger.active span:nth-child(3) {
                transform: rotate(-45deg) translate(7px,-6px);
            }

            .nav-links {
                position: fixed;
                top: 80px;
                right: -100%;
                width: 100%;
                height: calc(100vh - 80px);
                background: #fff;
                flex-direction: column;
                padding: 2rem;
                gap: 1.5rem;
                transition: right .3s;
                box-shadow: 0 5px 20px rgba(0,0,0,.1);
            }

            .nav-links.active {
                right: 0;
            }

            .donation-hero h1 {
                font-size: 2.5rem;
            }

            .tabs-container {
                flex-direction: column;
                align-items: stretch;
            }

            .tab-btn {
                justify-content: center;
            }

            .donor-stats {
                grid-template-columns: 1fr;
            }

            .donor-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="notification-toast" id="notificationToast">
        <i class="ri-checkbox-circle-fill"></i>
        <div class="notification-content">
            <div class="notification-title" id="notificationTitle">Success!</div>
            <div class="notification-message" id="notificationMessage">Message</div>
        </div>
    </div>

    <nav>
        <div class="logo">
            <a href="index.html"><img src="images/logo.png" alt="HamroCare Logo"></a>
        </div>
        <div class="nav-right">
            <button class="hamburger" id="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html">Home</a></li>
                <li><a href="adopt.html">Adopt</a></li>
                <li><a href="index.html#why-us-section">About</a></li>
                <li><a href="gallery.html">Gallery</a></li>
                <li><a href="donation.html" class="active">Donate</a></li>
                <li>
                    <div class="user-icon" onclick="openModal()" id="userIcon">
                        <i class="ri-user-line"></i>
                    </div>
                    <img src="" alt="User" class="user-avatar" id="userAvatar" onclick="toggleUserMenu()">
                    <button class="sign-out-btn" id="signOutBtn" onclick="handleSignOut()">Sign out</button>
                </li>
            </ul>
        </div>
    </nav>

    <section class="donation-hero">
        <h1>Make a Difference</h1>
        <p>Your generosity helps us provide food, shelter, and medical care to animals in need</p>
    </section>

    <div class="tabs-container">
        <button class="tab-btn active" onclick="switchTab('donate')">
            <i class="ri-hand-heart-line"></i>
            Donate
        </button>
        <button class="tab-btn" onclick="switchTab('donors')">
            <i class="ri-trophy-line"></i>
            Top Donors
        </button>
    </div>

    <div class="content-wrapper">
        <div class="donate-section active" id="donateSection">
            <button class="create-post-btn" onclick="openCreatePostModal()" id="createPostBtn">
                <i class="ri-add-circle-line"></i>
                Create Donation Request
            </button>

            <div class="donation-posts" id="donationPosts"></div>
        </div>

        <div class="top-donors-section" id="donorsSection">
            <div class="donors-header">
                <h2>Top Donors</h2>
                <p>Celebrating our most generous supporters who make our mission possible</p>
            </div>

            <div class="donors-list" id="donorsList"></div>
        </div>
    </div>

    <div class="modal-overlay" id="authModal" onclick="closeModalOnOverlay(event, 'authModal')">
        <div class="modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeAuthModal()">
                <i class="ri-close-line"></i>
            </button>

            <div class="auth-toggle">
                <button class="auth-toggle-btn active" id="loginToggle" onclick="showLogin()">Login</button>
                <button class="auth-toggle-btn" id="signupToggle" onclick="showSignup()">Sign Up</button>
            </div>

            <div class="login-form active" id="loginForm">
                <h2 class="modal-title">Welcome Back</h2>
                <p class="modal-subtitle">Login to continue your journey</p>
                
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" placeholder="Enter your password" required>
                    </div>
                    
                    <button type="submit" class="submit-btn">Login</button>
                    
                    <div class="or-divider"><span>OR</span></div>
                    
                    <div id="g_id_onload"
                         data-client_id="1091162397024-te53me83sai0uhfmpk0rv7evvre59aeg.apps.googleusercontent.com"
                         data-callback="handleGoogleLogin">
                    </div>
                    <div class="g_id_signin"
                         data-type="standard"
                         data-size="large"
                         data-theme="outline"
                         data-text="sign_in_with"
                         data-shape="rectangular"
                         data-width="100%">
                    </div>
                </form>
            </div>

            <div class="signup-form" id="signupForm">
                <h2 class="modal-title">Create Account</h2>
                <p class="modal-subtitle">Sign up to join our community</p>
                
                <form onsubmit="handleSignup(event)">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" placeholder="Create a password" required>
                    </div>
                    
                    <button type="submit" class="submit-btn">Create Account</button>
                    
                    <div class="or-divider"><span>OR</span></div>
                    
                    <div id="g_id_onload"
                         data-client_id="1091162397024-te53me83sai0uhfmpk0rv7evvre59aeg.apps.googleusercontent.com"
                         data-callback="handleGoogleSignup">
                    </div>
                    <div class="g_id_signin"
                         data-type="standard"
                         data-size="large"
                         data-theme="outline"
                         data-text="sign_up_with"
                         data-shape="rectangular"
                         data-width="100%">
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="createPostModal" onclick="closeModalOnOverlay(event, 'createPostModal')">
        <div class="modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeCreatePostModal()">
                <i class="ri-close-line"></i>
            </button>

            <h2 class="modal-title">Create Donation Request</h2>
            <p class="modal-subtitle">Share your shelter's needs with the community</p>

            <form onsubmit="handleCreatePost(event)">
                <div class="form-group">
                    <label>Shelter Name</label>
                    <input type="text" id="postShelterName" placeholder="Enter shelter name" required>
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <textarea id="postDescription" placeholder="Describe what you need and why..." required></textarea>
                </div>

                <div class="form-group">
                    <label>Upload Image</label>
                    <div class="file-upload-area" onclick="document.getElementById('postImage').click()">
                        <i class="ri-image-add-line"></i>
                        <p><strong>Click to upload image</strong></p>
                        <p style="font-size: 0.85rem; color: #666; margin-top: 0.5rem;">JPG, PNG or JPEG</p>
                        <input type="file" id="postImage" accept="image/*">
                    </div>
                </div>

                <button type="submit" class="submit-btn">Create Post</button>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="donateModal" onclick="closeModalOnOverlay(event, 'donateModal')">
        <div class="modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeDonateModal()">
                <i class="ri-close-line"></i>
            </button>

            <h2 class="modal-title">Make a Donation</h2>
            <p class="modal-subtitle">Choose how you'd like to help</p>

            <div class="donation-type-grid" id="donationTypeGrid">
                <div class="donation-type-card" onclick="selectDonationType('money')">
                    <i class="ri-money-dollar-circle-line"></i>
                    <h3>Money</h3>
                </div>
                <div class="donation-type-card" onclick="selectDonationType('food')">
                    <i class="ri-restaurant-line"></i>
                    <h3>Food</h3>
                </div>
                <div class="donation-type-card" onclick="selectDonationType('items')">
                    <i class="ri-box-3-line"></i>
                    <h3>Items</h3>
                </div>
            </div>

            <form class="payment-form" id="paymentForm" onsubmit="handlePayment(event)">
                <button type="button" class="back-btn" onclick="resetDonationType()">
                    <i class="ri-arrow-left-line"></i> Back
                </button>

                <div class="form-group">
                    <label>Payment Method</label>
                    <select id="paymentMethod" style="width: 100%; padding: .8rem; border: 2px solid #e5e5e5; border-radius: 10px; font-size: 1rem;" required>
                        <option value="">Select payment method</option>
                        <option value="esewa">eSewa</option>
                        <option value="khalti">Khalti</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Username/Phone</label>
                    <input type="text" id="paymentUsername" placeholder="Enter your username or phone number" required>
                </div>

                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="paymentPassword" placeholder="Enter your password" required>
                </div>

                <div class="form-group">
                    <label>Amount (NPR)</label>
                    <input type="number" id="paymentAmount" placeholder="Enter amount" min="1" required>
                </div>

                <div class="form-group">
                    <label>Remark (Optional)</label>
                    <textarea id="paymentRemark" placeholder="Add a message..." style="min-height: 80px;"></textarea>
                </div>

                <button type="submit" class="submit-btn">Proceed to Pay</button>
            </form>

            <form class="pickup-form" id="pickupForm" onsubmit="handlePickup(event)">
                <button type="button" class="back-btn" onclick="resetDonationType()">
                    <i class="ri-arrow-left-line"></i> Back
                </button>

                <div class="location-display" id="locationDisplay">
                    <i class="ri-map-pin-line"></i>
                    <span>Getting your location...</span>
                </div>

                <div class="form-group">
                    <label>What are you donating?</label>
                    <textarea id="donationDescription" placeholder="Describe what you're donating..." required style="min-height: 100px;"></textarea>
                </div>

                <div class="form-group">
                    <label>Upload Photo</label>
                    <div class="file-upload-area" onclick="document.getElementById('donationPhoto').click()">
                        <i class="ri-image-add-line"></i>
                        <p><strong>Click to upload photo</strong></p>
                        <p style="font-size: 0.85rem; color: #666; margin-top: 0.5rem;">JPG, PNG or JPEG</p>
                        <input type="file" id="donationPhoto" accept="image/*" onchange="previewImage(event)" required>
                        <div class="file-preview" id="filePreview"></div>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Continue</button>
            </form>
        </div>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <div class="modal-overlay" id="successModal">
        <div class="success-modal">
            <div class="success-icon">
                <i class="ri-checkbox-circle-fill"></i>
            </div>
            <h2 id="successTitle">Payment Successful!</h2>
            <div class="success-amount" id="successAmount">NPR 0</div>
            <p class="success-message" id="successMessage">
                Thank you for your generous contribution! Your donation will help us provide better care for animals in need. Together, we're making a real difference in their lives.
            </p>
            <div class="estimated-time" id="estimatedTime" style="display: none;">
                <i class="ri-time-line"></i>
                <span>Estimated pickup: 15-30 minutes</span>
            </div>
            <button class="submit-btn" onclick="closeSuccessModal()">Done</button>
        </div>
    </div>

    <script>
        const donationPosts = [
            {
                id: 1,
                shelter: 'Happy Paws Shelter',
                time: '2 hours ago',
                text: 'Urgent need for food supplies! We are currently caring for 45 rescued dogs and cats. Winter is coming and we need your help to keep them warm and fed. Any contribution of pet food, blankets, or monetary donations would be greatly appreciated.',
                needs: ['Pet Food', 'Money', 'Blankets'],
                image: 'donations/1.png'
            },
            {
                id: 2,
                shelter: 'Animal Rescue Nepal',
                time: '5 hours ago',
                text: 'Medical emergency fund needed! We have several injured street animals that require immediate veterinary care. The treatment costs are beyond our current budget. Please help us save these innocent lives.',
                needs: ['Money', 'Medical Supplies'],
                image: 'donations/2.png'
            },
            {
                id: 3,
                shelter: 'Compassion Animal Shelter',
                time: '1 day ago',
                text: 'Building a better future for our furry friends! We are expanding our shelter to accommodate more rescued animals. Your donations will help us build new kennels, install proper ventilation, and create a safer environment for the animals.',
                needs: ['Money', 'Construction Materials'],
                image: 'donations/3.png'
            }
        ];

        const topDonors = [
            {
                rank: 1,
                name: 'Amish Lamsal',
                points: 2850,
                money: 125000,
                food: 340,
                moneyProgress: 95,
                foodProgress: 85
            },
            {
                rank: 2,
                name: 'Mison Khatiwada',
                points: 2340,
                money: 98000,
                food: 280,
                moneyProgress: 80,
                foodProgress: 70
            },
            {
                rank: 3,
                name: 'Sushant Poudel',
                points: 1890,
                money: 75000,
                food: 225,
                moneyProgress: 65,
                foodProgress: 60
            },
            {
                rank: 4,
                name: 'Aakriti Sharma',
                points: 1650,
                money: 62000,
                food: 195,
                moneyProgress: 55,
                foodProgress: 50
            },
            {
                rank: 5,
                name: 'Bikash Thapa',
                points: 1420,
                money: 54000,
                food: 168,
                moneyProgress: 48,
                foodProgress: 45
            }
        ];

        let currentUserType = 'user';

        function checkLoginStatus() {
            const userData = localStorage.getItem('userData');
            const userType = localStorage.getItem('userType') || 'user';
            currentUserType = userType;
            
            if (userData) {
                const user = JSON.parse(userData);
                document.getElementById('userIcon').style.display = 'none';
                const avatar = document.getElementById('userAvatar');
                avatar.style.display = 'block';
                avatar.src = user.picture || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.name)}&background=4ade80&color=fff`;
                document.getElementById('signOutBtn').style.display = 'block';
            }
            
            updateCreatePostButton();
        }

        function updateCreatePostButton() {
            const createBtn = document.getElementById('createPostBtn');
            if (currentUserType === 'shelter') {
                createBtn.style.display = 'flex';
            } else {
                createBtn.style.display = 'none';
            }
        }

        function renderDonationPosts() {
            const container = document.getElementById('donationPosts');
            container.innerHTML = donationPosts.map(post => `
                <div class="donation-post">
                    <img src="${post.image}" alt="${post.shelter}" class="post-image">
                    <div class="post-content">
                        <div>
                            <div class="post-header">
                                <div class="shelter-avatar">
                                    <i class="ri-home-heart-line"></i>
                                </div>
                                <div class="shelter-info">
                                    <h3>${post.shelter}</h3>
                                    <span class="post-time">${post.time}</span>
                                </div>
                            </div>
                            <p class="post-text">${post.text}</p>
                            <div class="donation-needs">
                                ${post.needs.map(need => `<span class="need-tag">${need}</span>`).join('')}
                            </div>
                        </div>
                        <button class="donate-btn-post" onclick="openDonateModal(${post.id})">
                            <i class="ri-heart-fill"></i>
                            Donate Now
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function renderTopDonors() {
            const container = document.getElementById('donorsList');
            container.innerHTML = topDonors.map(donor => `
                <div class="donor-card rank-${donor.rank}">
                    <div class="donor-header">
                        <div class="donor-info">
                            <div class="donor-rank">${donor.rank}</div>
                            <div class="donor-name">${donor.name}</div>
                        </div>
                        <div class="donor-points">
                            <i class="ri-star-fill"></i>
                            ${donor.points.toLocaleString()} Points
                        </div>
                    </div>
                    <div class="donor-stats">
                        <div class="stat-item">
                            <div class="stat-label">Money Donated</div>
                            <div class="stat-value">NPR ${donor.money.toLocaleString()}</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${donor.moneyProgress}%"></div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Food Packages</div>
                            <div class="stat-value">${donor.food} Packages</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${donor.foodProgress}%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function switchTab(tab) {
            const tabs = document.querySelectorAll('.tab-btn');
            tabs.forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            if (tab === 'donate') {
                document.getElementById('donateSection').classList.add('active');
                document.getElementById('donorsSection').classList.remove('active');
            } else {
                document.getElementById('donateSection').classList.remove('active');
                document.getElementById('donorsSection').classList.add('active');
            }
        }

        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('active');
            document.getElementById('hamburger').classList.toggle('active');
        }

        function openModal() {
            document.getElementById('authModal').classList.add('active');
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
        }

        function closeModalOnOverlay(event, modalId) {
            if (event.target.id === modalId) {
                document.getElementById(modalId).classList.remove('active');
            }
        }

        function showLogin() {
            document.getElementById('loginToggle').classList.add('active');
            document.getElementById('signupToggle').classList.remove('active');
            document.getElementById('loginForm').classList.add('active');
            document.getElementById('signupForm').classList.remove('active');
        }

        function showSignup() {
            document.getElementById('loginToggle').classList.remove('active');
            document.getElementById('signupToggle').classList.add('active');
            document.getElementById('loginForm').classList.remove('active');
            document.getElementById('signupForm').classList.add('active');
        }

        function handleLogin(event) {
            event.preventDefault();
            const user = {
                name: 'User',
                email: event.target[0].value,
                picture: `https://ui-avatars.com/api/?name=User&background=4ade80&color=fff`
            };
            localStorage.setItem('userData', JSON.stringify(user));
            localStorage.setItem('userType', 'user');
            
            document.getElementById('userIcon').style.display = 'none';
            const avatar = document.getElementById('userAvatar');
            avatar.style.display = 'block';
            avatar.src = user.picture;
            document.getElementById('signOutBtn').style.display = 'block';
            
            closeAuthModal();
            showNotification('Welcome!', 'Successfully logged in');
            checkLoginStatus();
        }

        function handleSignup(event) {
            event.preventDefault();
            const user = {
                name: event.target[0].value,
                email: event.target[1].value,
                picture: `https://ui-avatars.com/api/?name=${encodeURIComponent(event.target[0].value)}&background=4ade80&color=fff`
            };
            localStorage.setItem('userData', JSON.stringify(user));
            localStorage.setItem('userType', 'user');
            
            document.getElementById('userIcon').style.display = 'none';
            const avatar = document.getElementById('userAvatar');
            avatar.style.display = 'block';
            avatar.src = user.picture;
            document.getElementById('signOutBtn').style.display = 'block';
            
            closeAuthModal();
            showNotification('Welcome!', 'Account created successfully');
            checkLoginStatus();
        }

        function handleGoogleLogin(response) {
            const userData = parseJwt(response.credential);
            const user = {
                name: userData.name,
                email: userData.email,
                picture: userData.picture
            };
            localStorage.setItem('userData', JSON.stringify(user));
            localStorage.setItem('userType', 'user');
            
            document.getElementById('userIcon').style.display = 'none';
            const avatar = document.getElementById('userAvatar');
            avatar.style.display = 'block';
            avatar.src = user.picture;
            document.getElementById('signOutBtn').style.display = 'block';
            
            closeAuthModal();
            showNotification('Welcome!', `Logged in as ${user.name}`);
            checkLoginStatus();
        }

        function handleGoogleSignup(response) {
            handleGoogleLogin(response);
        }

        function parseJwt(token) {
            const base64Url = token.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => 
                '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)
            ).join(''));
            return JSON.parse(jsonPayload);
        }

        function handleSignOut() {
            localStorage.removeItem('userData');
            localStorage.removeItem('userType');
            currentUserType = 'user';
            document.getElementById('userIcon').style.display = 'flex';
            document.getElementById('userAvatar').style.display = 'none';
            document.getElementById('signOutBtn').style.display = 'none';
            updateCreatePostButton();
            showNotification('Signed Out', 'You have been signed out successfully');
        }

        function toggleUserMenu() {
            const signOutBtn = document.getElementById('signOutBtn');
            signOutBtn.style.display = signOutBtn.style.display === 'block' ? 'none' : 'block';
        }

        function openCreatePostModal() {
            const userData = localStorage.getItem('userData');
            if (!userData) {
                openModal();
                showNotification('Login Required', 'Please log in as a shelter to create posts');
                return;
            }
            
            if (currentUserType !== 'shelter') {
                showNotification('Access Denied', 'Only shelter accounts can create donation requests');
                return;
            }
            
            document.getElementById('createPostModal').classList.add('active');
        }

        function closeCreatePostModal() {
            document.getElementById('createPostModal').classList.remove('active');
        }

        function handleCreatePost(event) {
            event.preventDefault();
            const shelterName = document.getElementById('postShelterName').value;
            const description = document.getElementById('postDescription').value;
            
            showNotification('Success!', 'Your donation request has been posted');
            closeCreatePostModal();
            event.target.reset();
        }

        function openDonateModal(postId) {
            const userData = localStorage.getItem('userData');
            if (!userData) {
                openModal();
                showNotification('Login Required', 'Please log in to make a donation');
                return;
            }
            
            document.getElementById('donateModal').classList.add('active');
            resetDonationType();
        }

        function closeDonateModal() {
            document.getElementById('donateModal').classList.remove('active');
            resetDonationType();
        }

        function selectDonationType(type) {
            document.querySelectorAll('.donation-type-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.donation-type-card').classList.add('selected');

            if (type === 'money') {
                document.getElementById('paymentForm').classList.add('active');
                document.getElementById('pickupForm').classList.remove('active');
                document.getElementById('donationTypeGrid').style.display = 'none';
            } else {
                document.getElementById('paymentForm').classList.remove('active');
                document.getElementById('pickupForm').classList.add('active');
                document.getElementById('donationTypeGrid').style.display = 'none';
                getUserLocation();
            }
        }

        function resetDonationType() {
            document.getElementById('donationTypeGrid').style.display = 'grid';
            document.getElementById('paymentForm').classList.remove('active');
            document.getElementById('pickupForm').classList.remove('active');
            document.querySelectorAll('.donation-type-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.getElementById('paymentForm').reset();
            document.getElementById('pickupForm').reset();
            document.getElementById('filePreview').innerHTML = '';
        }

        function getUserLocation() {
            const locationDisplay = document.getElementById('locationDisplay');
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude.toFixed(4);
                        const lon = position.coords.longitude.toFixed(4);
                        locationDisplay.innerHTML = `
                            <i class="ri-map-pin-line"></i>
                            <span>Location: ${lat}, ${lon}</span>
                        `;
                    },
                    (error) => {
                        locationDisplay.innerHTML = `
                            <i class="ri-map-pin-line"></i>
                            <span>Using default location: Bharatpur, Nepal</span>
                        `;
                    }
                );
            } else {
                locationDisplay.innerHTML = `
                    <i class="ri-map-pin-line"></i>
                    <span>Location: Bharatpur, Nepal</span>
                `;
            }
        }

        function previewImage(event) {
            const file = event.target.files[0];
            const preview = document.getElementById('filePreview');
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `
                        <p style="color: #4ade80; font-weight: 600; margin-top: 1rem;">
                            <i class="ri-check-line"></i> Photo uploaded
                        </p>
                        <img src="${e.target.result}" alt="Preview">
                    `;
                };
                reader.readAsDataURL(file);
            }
        }

        function handlePayment(event) {
            event.preventDefault();
            
            const method = document.getElementById('paymentMethod').value;
            const amount = document.getElementById('paymentAmount').value;
            const remark = document.getElementById('paymentRemark').value;
            
            closeDonateModal();
            
            document.getElementById('loadingOverlay').classList.add('active');
            
            setTimeout(() => {
                document.getElementById('loadingOverlay').classList.remove('active');
                
                document.getElementById('successTitle').textContent = 'Payment Successful!';
                document.getElementById('successAmount').textContent = `NPR ${parseInt(amount).toLocaleString()}`;
                document.getElementById('successMessage').textContent = 
                    'Thank you for your generous contribution! Your donation will help us provide better care for animals in need. Together, we\'re making a real difference in their lives.';
                document.getElementById('estimatedTime').style.display = 'none';
                
                document.getElementById('successModal').classList.add('active');
            }, 2500);
        }

        function handlePickup(event) {
            event.preventDefault();
            
            const description = document.getElementById('donationDescription').value;
            
            closeDonateModal();
            
            document.getElementById('loadingOverlay').classList.add('active');
            
            setTimeout(() => {
                document.getElementById('loadingOverlay').classList.remove('active');
                
                document.getElementById('successTitle').textContent = 'Pickup Scheduled!';
                document.getElementById('successAmount').textContent = 'Thank You!';
                document.getElementById('successMessage').textContent = 
                    'Our delivery rider will appear shortly to collect your generous donation. Your kindness helps us provide better care for animals in need.';
                document.getElementById('estimatedTime').style.display = 'flex';
                
                document.getElementById('successModal').classList.add('active');
            }, 2000);
        }

        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('active');
        }

        function handleDonation(event) {
            event.preventDefault();
            const type = document.getElementById('donationType').value;
            const amount = document.getElementById('donationAmount').value;
            
            const typeText = type === 'money' ? 'NPR ' + amount : amount + ' food packages';
            showNotification('Thank You!', `Your donation of ${typeText} has been received`);
            closeDonateModal();
            event.target.reset();
        }

        function showNotification(title, message) {
            const toast = document.getElementById('notificationToast');
            document.getElementById('notificationTitle').textContent = title;
            document.getElementById('notificationMessage').textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 4000);
        }

        checkLoginStatus();
        renderDonationPosts();
        renderTopDonors();
    </script>
</body>
</html>